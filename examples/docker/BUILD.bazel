load("@rules_oci//oci:defs.bzl", "oci_load")
load(":py_oci_image.bzl", "py_oci_image")

py_oci_image(
    name = "chatter_image",
    base = "@python_base_image",
    binary = "//chatter",
    tars = [
        "@libatomic_amd64//:layer",
    ],
)

# To build the image and load it into it into a local runtime:
# $ bazel run //chatter_image.load
# $ docker run --rm chatter:latest
oci_load(
    name = "chatter_image.load",
    image = ":chatter_image",
    repo_tags = ["chatter:latest"],
)
